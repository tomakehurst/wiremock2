

<!doctype html>
<html lang="en" class="no-js">
  <head>
    

<meta charset="utf-8">



<!-- begin SEO -->









<title>Running as a Standalone Process - WireMock</title>







<meta name="description" content="Running WireMock as a standalone mock server.">

<meta property="og:locale" content="en-US">
<meta property="og:site_name" content="WireMock">
<meta property="og:title" content="Running as a Standalone Process">


  <link rel="canonical" href="http://tomakehurst.com/wiremock2/docs/running-standalone/">
  <meta property="og:url" content="http://tomakehurst.com/wiremock2/docs/running-standalone/">



  <meta property="og:description" content="Running WireMock as a standalone mock server.">





  

  





  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2016-06-29T14:31:10+01:00">
  
    <link rel="next" href="http://tomakehurst.com/wiremock2/docs/simulating-faults/" title="Simulating Faults">
  
  
    <link rel="prev" href="http://tomakehurst.com/wiremock2/docs/record-playback/" title="Record and Playback">
  





  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "Tom Akehurst",
      "url" : "http://tomakehurst.com/wiremock2",
      "sameAs" : null
    }
  </script>






<!-- end SEO -->


<link href="http://tomakehurst.com/wiremock2/feed.xml" type="application/atom+xml" rel="alternate" title="WireMock Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<link href="https://fonts.googleapis.com/css?family=Lato|Source+Code+Pro" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=McLaren" rel="stylesheet">

<!-- For all browsers -->
<link rel="stylesheet" href="http://tomakehurst.com/wiremock2/assets/css/main.css">

<meta http-equiv="cleartype" content="on">

    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->
  </head>

  <body>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <button><div class="navicon"></div></button>
        <ul class="visible-links">
          <li class="masthead__menu-item masthead__menu-item--lg"><a href="http://tomakehurst.com/wiremock2/">WireMock</a></li>
          
            

            
            <li class="masthead__menu-item"><a href="http://tomakehurst.com/wiremock2/docs">Docs</a></li>
            

          
            

            
            <li class="masthead__menu-item"><a href="http://tomakehurst.com/wiremock2/blog">Blog</a></li>
            

          
            

            
            <li class="masthead__menu-item"><a href="http://tomakehurst.com/wiremock2/about">About</a></li>
            

          
            

            
            <li class="masthead__menu-item"><a href="https://github.com/tomakehurst/wiremock" target="_blank">GitHub</a></li>
            

          
            

            
            <li class="masthead__menu-item"><a href="https://groups.google.com/forum/#!forum/wiremock-user" target="_blank">Mailing List</a></li>
            

          
            

            
            <li class="masthead__menu-item"><a href="http://get.mocklab.io" target="_blank">MockLab</a></li>
            

          
        </ul>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    

<div id="main" role="main">
  


<div class="sidebar sticky">
  <nav class="nav__list">

    <ul>
      

      
      <li>
        <a href="http://tomakehurst.com/wiremock2/docs/getting-started/">

        Getting Started
      </a>
      
      <li>
        <a href="http://tomakehurst.com/wiremock2/docs/junit-rule/">

        The JUnit 4.x Rule
      </a>
      
      <li>
        <a href="http://tomakehurst.com/wiremock2/docs/java-usage/">

        Java (Non-JUnit) Usage
      </a>
      
      <li>
        <a href="/docs/running-standalone/" class="nav__list-item--selected">
        

        Running as a Standalone Process
      </a>
      
      <li>
        <a href="http://tomakehurst.com/wiremock2/docs/stubbing/">

        Stubbing
      </a>
      
      <li>
        <a href="http://tomakehurst.com/wiremock2/docs/verifying/">

        Verifying
      </a>
      
      <li>
        <a href="http://tomakehurst.com/wiremock2/docs/proxying/">

        Proxying
      </a>
      
      <li>
        <a href="http://tomakehurst.com/wiremock2/docs/record-playback/">

        Record and Playback
      </a>
      
      <li>
        <a href="http://tomakehurst.com/wiremock2/docs/simulating-faults/">

        Simulating Faults
      </a>
      
      <li>
        <a href="http://tomakehurst.com/wiremock2/docs/stateful-behaviour/">

        Stateful Behaviour
      </a>
      
      <li>
        <a href="http://tomakehurst.com/wiremock2/docs/https/">

        HTTPS
      </a>
      
      <li>
        <a href="http://tomakehurst.com/wiremock2/docs/extending-wiremock/">

        Extending WireMock
      </a>
      
    </ul>
  </nav>
</div>


  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Running as a Standalone Process">
    <meta itemprop="description" content="The WireMock server can be run in its own process, and configured viathe Java API, JSON over HTTP or JSON files.">
    <meta itemprop="datePublished" content="June 29, 2016">
    

    <div class="page__inner-wrap">
      <header>
        <h1 class="page__title" itemprop="headline">Running as a Standalone Process
</h1>
      </header>

      <section class="page__content" itemprop="text">
        <p>The WireMock server can be run in its own process, and configured via
the Java API, JSON over HTTP or JSON files.</p>

<p>This will start the server on port 8080:</p>

<p>You can <a href="http://repo1.maven.org/maven2/com/github/tomakehurst/wiremock-standalone/2.1.0-beta/wiremock-standalone-2.1.0-beta.jar">download the standalone JAR from
here</a>.</p>

<p>Supported command line options are:</p>

<p><code class="highlighter-rouge">--port</code>: Set the HTTP port number e.g. <code class="highlighter-rouge">--port 9999</code></p>

<p><code class="highlighter-rouge">--https-port</code>: If specified, enables HTTPS on the supplied port.</p>

<p><code class="highlighter-rouge">--https-keystore</code>: Path to a keystore file containing an SSL
certificate to use with HTTPS. The keystore must have a password of
“password”. This option will only work if <code class="highlighter-rouge">--https-port</code> is specified.
If this option isn’t used WireMock will default to its own self-signed
certificate.</p>

<p><code class="highlighter-rouge">--keystore-password</code>: Password to the keystore, if something other than
“password”.</p>

<p><code class="highlighter-rouge">--https-truststore</code>: Path to a keystore file containing client
certificates. See https and proxy-client-certs for details.</p>

<p><code class="highlighter-rouge">--truststore-password</code>: Optional password to the trust store. Defaults
to “password” if not specified.</p>

<p><code class="highlighter-rouge">--https-require-client-cert</code>: Force clients to authenticate with a
client certificate. See https for details.</p>

<p><code class="highlighter-rouge">--verbose</code>: Turn on verbose logging to stdout</p>

<p><code class="highlighter-rouge">--root-dir</code>: Sets the root directory, under which <code class="highlighter-rouge">mappings</code> and
<code class="highlighter-rouge">__files</code> reside. This defaults to the current directory.</p>

<p><code class="highlighter-rouge">--record-mappings</code>: Record incoming requests as stub mappings. See
record-playback.</p>

<p><code class="highlighter-rouge">--match-headers</code>: When in record mode, capture request headers with the
keys specified. See record-playback.</p>

<p><code class="highlighter-rouge">--proxy-all</code>: Proxy all requests through to another base URL e.g.
<code class="highlighter-rouge">--proxy-all="http://api.someservice.com"</code> Typically used in conjunction
with <code class="highlighter-rouge">--record-mappings</code> such that a session on another service can be
recorded.</p>

<p><code class="highlighter-rouge">--preserve-host-header</code>: When in proxy mode, it passes the Host header
as it comes from the client through to the proxied service. When this
option is not present, the Host header value is deducted from the proxy
URL. This option is only available if the <code class="highlighter-rouge">--proxy-all</code> option is
specified.</p>

<p><code class="highlighter-rouge">--proxy-via</code>: When proxying requests (either by using –proxy-all or by
creating stub mappings that proxy to other hosts), route via another
proxy server (useful when inside a corporate network that only permits
internet access via an opaque proxy). e.g.
<code class="highlighter-rouge">--proxy-via webproxy.mycorp.com</code> (defaults to port 80) or
<code class="highlighter-rouge">--proxy-via webproxy.mycorp.com:8080</code></p>

<p><code class="highlighter-rouge">--enable-browser-proxying</code>: Run as a browser proxy. See
browser-proxying.</p>

<p><code class="highlighter-rouge">--no-request-journal</code>: Disable the request journal, which records
incoming requests for later verification. This allows WireMock to be run
(and serve stubs) for long periods (without resetting) without
exhausting the heap. The <code class="highlighter-rouge">--record-mappings</code> option isn’t available if
this one is specified.</p>

<p><code class="highlighter-rouge">--container-threads</code>: The number of threads created for incoming
requests. Defaults to 200.</p>

<p><code class="highlighter-rouge">--max-request-journal-entries</code>: Set maximum number of entries in
request journal (if enabled). When this limit is reached oldest entries
will be discarded.</p>

<p><code class="highlighter-rouge">--jetty-acceptor-threads</code>: The number of threads Jetty uses for
accepting requests.</p>

<p><code class="highlighter-rouge">--jetty-accept-queue-size</code>: The Jetty queue size for accepted requests.</p>

<p><code class="highlighter-rouge">--jetty-header-buffer-size</code>: The Jetty buffer size for request headers,
e.g. <code class="highlighter-rouge">--jetty-header-buffer-size 16384</code>, defaults to 8192K.</p>

<p><code class="highlighter-rouge">--extensions</code>: Extension class names e.g.
com.mycorp.HeaderTransformer,com.mycorp.BodyTransformer. See
extending-wiremock.</p>

<p><code class="highlighter-rouge">--help</code>: Show command line help</p>

<h2 id="file-serving">File serving</h2>

<p>When running standalone files placed under the <code class="highlighter-rouge">__files</code> directory will
be served up as if from under the docroot, except if stub mapping
matching the URL exists. For example if a file exists
<code class="highlighter-rouge">__files/things/myfile.html</code> and no stub mapping will match
<code class="highlighter-rouge">/things/myfile.html</code> then hitting
<code class="highlighter-rouge">http://&lt;host&gt;:&lt;port&gt;/things/myfile.html</code> will serve the file.</p>

<h2 id="configuring-via-json">Configuring via JSON</h2>

<p>Once the server has started you can give it a spin by setting up a stub
mapping via the JSON API:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>curl -X POST <span class="se">\</span>
--data <span class="s1">'{ "request": { "url": "/get/this", "method": "GET" }, "response": { "status": 200, "body": "Here it is!\n" }}'</span> <span class="se">\</span>
http://localhost:8080/__admin/mappings/new
</code></pre>
</div>

<p>Then fetching it back:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>curl http://localhost:8080/get/this
Here it is!
</code></pre>
</div>

<p>You can also use the JSON API via files. When the WireMock server starts
it creates two directories under the current one: <code class="highlighter-rouge">mappings</code> and
<code class="highlighter-rouge">__files</code>.</p>

<p>To create a stub like the one above by this method, drop a file with a
<code class="highlighter-rouge">.json</code> extension under <code class="highlighter-rouge">mappings</code> with the following content:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span>
    <span class="s2">"request"</span><span class="err">:</span> <span class="p">{</span>
        <span class="s2">"method"</span><span class="err">:</span> <span class="s2">"GET"</span><span class="p">,</span>
        <span class="s2">"url"</span><span class="err">:</span> <span class="s2">"/api/mytest"</span>
    <span class="p">},</span>
    <span class="s2">"response"</span><span class="err">:</span> <span class="p">{</span>
        <span class="s2">"status"</span><span class="err">:</span> <span class="mi">200</span><span class="p">,</span>
        <span class="s2">"body"</span><span class="err">:</span> <span class="s2">"More content\n"</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<p>After restarting the server you should be able to do this:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>curl http://localhost:8080/api/mytest
More content
</code></pre>
</div>

<p>See stubbing and verifying for more on the JSON API.</p>

<h3 id="shutting-down">Shutting Down</h3>

<p>To shutdown the server, either call <code class="highlighter-rouge">WireMock.shutdownServer()</code> or post
a request with an empty body to <code class="highlighter-rouge">http://&lt;host&gt;:&lt;port&gt;/__admin/shutdown</code>.</p>

        
      </section>

      <footer class="page__meta">
        
        




      </footer>

      
    </div>

    
  </article>

  
  
</div>


    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
    
    
    
    <li><a href="http://tomakehurst.com/wiremock2/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2016 Tom Akehurst. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>
      </footer>
    </div>

    <script src="http://tomakehurst.com/wiremock2/assets/js/main.min.js"></script>




  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-36386229-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>






  </body>
</html>

