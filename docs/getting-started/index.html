

<!doctype html>
<html lang="en" class="no-js">
  <head>
    

<meta charset="utf-8">



<!-- begin SEO -->









<title>Getting Started - WireMock</title>







<meta name="description" content="Getting started with WireMock. Java, JUnit, standalone, servlet container.">

<meta property="og:locale" content="en-US">
<meta property="og:site_name" content="WireMock">
<meta property="og:title" content="Getting Started">




  <meta property="og:description" content="Getting started with WireMock. Java, JUnit, standalone, servlet container.">





  

  





  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2016-07-07T12:30:07+01:00">
  
    <link rel="next" href="/docs/https/" title="HTTPS">
  
  
    <link rel="prev" href="/docs/extending-wiremock/" title="Extending WireMock">
  





  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "Tom Akehurst",
      "url" : null,
      "sameAs" : null
    }
  </script>






<!-- end SEO -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="WireMock Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<link href="https://fonts.googleapis.com/css?family=Lato|Source+Code+Pro" rel="stylesheet">

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<meta http-equiv="cleartype" content="on">

<link rel="shortcut icon" type="image/x-icon" href="/images/favicon3.png">

    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->
  </head>

  <body>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <button><div class="navicon"></div></button>
        <ul class="visible-links">
          <li class="masthead__menu-item masthead__menu-item--lg">
            <a href="/"><img src="/images/wiremock-concept-icon-01.png" style="width: 80px; height: 37px" /></a>
          </li>
          
            

            
            <li class="masthead__menu-item"><a href="/docs/">Docs</a></li>
            

          
            

            
            <li class="masthead__menu-item"><a href="/support-and-training/">Support & Training</a></li>
            

          
            

            
            <li class="masthead__menu-item"><a href="/about/">About</a></li>
            

          
            

            
            <li class="masthead__menu-item"><a href="https://github.com/tomakehurst/wiremock" target="_blank">GitHub</a></li>
            

          
            

            
            <li class="masthead__menu-item"><a href="https://groups.google.com/forum/#!forum/wiremock-user" target="_blank">Mailing List</a></li>
            

          
            

            
            <li class="masthead__menu-item"><a href="/external-resources/">External Resources</a></li>
            

          
            

            
            <li class="masthead__menu-item"><a href="http://get.mocklab.io" target="_blank">MockLab</a></li>
            

          
        </ul>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    

<div id="main" role="main">
  


<div class="sidebar sticky">
  <nav class="nav__list">

    <ul>
      

      
      <li>
        <a href="/docs/getting-started/" class="nav__list-item--selected">
        

        Getting Started
      </a>
      
      <li>
        <a href="/docs/junit-rule/">

        The JUnit 4.x Rule
      </a>
      
      <li>
        <a href="/docs/java-usage/">

        Java (Non-JUnit) Usage
      </a>
      
      <li>
        <a href="/docs/configuration/">

        Configuration
      </a>
      
      <li>
        <a href="/docs/running-standalone/">

        Running as a Standalone Process
      </a>
      
      <li>
        <a href="/docs/stubbing/">

        Stubbing
      </a>
      
      <li>
        <a href="/docs/verifying/">

        Verifying
      </a>
      
      <li>
        <a href="/docs/request-matching/">

        Request Matching
      </a>
      
      <li>
        <a href="/docs/proxying/">

        Proxying
      </a>
      
      <li>
        <a href="/docs/record-playback/">

        Record and Playback
      </a>
      
      <li>
        <a href="/docs/simulating-faults/">

        Simulating Faults
      </a>
      
      <li>
        <a href="/docs/stateful-behaviour/">

        Stateful Behaviour
      </a>
      
      <li>
        <a href="/docs/https/">

        HTTPS
      </a>
      
      <li>
        <a href="/docs/extending-wiremock/">

        Extending WireMock
      </a>
      
      <li>
        <a href="/docs/android/">

        Android
      </a>
      
    </ul>
  </nav>
</div>


  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Getting Started">
    <meta itemprop="description" content="WireMock is distributed in two flavours - a standard JAR containing justWireMock, and a standalone fat JAR containing WireMock plus all itsdependencies.">
    <meta itemprop="datePublished" content="July 07, 2016">
    

    <div class="page__inner-wrap">
      <header>
        <h1 class="page__title" itemprop="headline">Getting Started
</h1>
      </header>

      <section class="page__content" itemprop="text">
        <p>WireMock is distributed in two flavours - a standard JAR containing just
WireMock, and a standalone fat JAR containing WireMock plus all its
dependencies.</p>

<p>The fat JAR’s dependencies are shaded i.e. they are hidden in
alternative packages. This allows WireMock to be used in projects with
conflicting versions of its dependencies. The standalone JAR is also
runnable (discussed in more detail below).</p>

<h2 id="maven">Maven</h2>

<p>To add the standard WireMock JAR as a project dependency, put the
following in the dependencies section of your POM:</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>com.github.tomakehurst<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>wiremock<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>2.1.4-rc3<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre>
</div>

<p>Or to use the standalone JAR:</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>com.github.tomakehurst<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>wiremock-standalone<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>2.1.4-rc3<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre>
</div>

<h2 id="gradle">Gradle</h2>

<div class="language-groovy highlighter-rouge"><pre class="highlight"><code><span class="n">testCompile</span> <span class="s2">"com.github.tomakehurst:wiremock:2.1.4-rc3"</span>
</code></pre>
</div>

<p>Or</p>

<div class="language-groovy highlighter-rouge"><pre class="highlight"><code><span class="n">testCompile</span> <span class="s2">"com.github.tomakehurst:wiremock-standalone:2.1.4-rc3"</span>
</code></pre>
</div>

<h2 id="junit-4x">JUnit 4.x</h2>

<p>To use WireMock’s fluent API add the following import:</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">static</span> <span class="n">com</span><span class="o">.</span><span class="na">github</span><span class="o">.</span><span class="na">tomakehurst</span><span class="o">.</span><span class="na">wiremock</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">WireMock</span><span class="o">.*;</span>
</code></pre>
</div>

<p>WireMock ships with some JUnit rules to manage the server’s lifecycle
and setup/tear-down tasks. To start and stop WireMock per-test case, add
the following to your test class (or a superclass of it):</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="nd">@Rule</span>
<span class="kd">public</span> <span class="n">WireMockRule</span> <span class="n">wireMockRule</span> <span class="o">=</span> <span class="k">new</span> <span class="n">WireMockRule</span><span class="o">(</span><span class="mi">8089</span><span class="o">);</span> <span class="c1">// No-args constructor defaults to port 8080</span>
</code></pre>
</div>

<p>Now you’re ready to write a test case like this:</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">exampleTest</span><span class="p">(</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">stubFor</span><span class="o">(</span><span class="n">get</span><span class="o">(</span><span class="n">urlEqualTo</span><span class="o">(</span><span class="s">"/my/resource"</span><span class="o">))</span>
            <span class="o">.</span><span class="na">withHeader</span><span class="o">(</span><span class="s">"Accept"</span><span class="o">,</span> <span class="n">equalTo</span><span class="o">(</span><span class="s">"text/xml"</span><span class="o">))</span>
            <span class="o">.</span><span class="na">willReturn</span><span class="o">(</span><span class="n">aResponse</span><span class="o">()</span>
                <span class="o">.</span><span class="na">withStatus</span><span class="o">(</span><span class="mi">200</span><span class="o">)</span>
                <span class="o">.</span><span class="na">withHeader</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"text/xml"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">withBody</span><span class="o">(</span><span class="s">"&lt;response&gt;Some content&lt;/response&gt;"</span><span class="o">)));</span>

    <span class="n">Result</span> <span class="n">result</span> <span class="o">=</span> <span class="n">myHttpServiceCallingObject</span><span class="o">.</span><span class="na">doSomething</span><span class="o">();</span>

    <span class="n">assertTrue</span><span class="o">(</span><span class="n">result</span><span class="o">.</span><span class="na">wasSuccessFul</span><span class="o">());</span>

    <span class="n">verify</span><span class="o">(</span><span class="n">postRequestedFor</span><span class="o">(</span><span class="n">urlMatching</span><span class="o">(</span><span class="s">"/my/resource/[a-z0-9]+"</span><span class="o">))</span>
            <span class="o">.</span><span class="na">withRequestBody</span><span class="o">(</span><span class="n">matching</span><span class="o">(</span><span class="s">".*&lt;message&gt;1234&lt;/message&gt;.*"</span><span class="o">))</span>
            <span class="o">.</span><span class="na">withHeader</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="n">notMatching</span><span class="o">(</span><span class="s">"application/json"</span><span class="o">)));</span>
<span class="o">}</span>
</code></pre>
</div>

<p>For many more examples of JUnit tests look no further than <a href="https://github.com/tomakehurst/wiremock/tree/master/src/test/java/com/github/tomakehurst/wiremock">WireMock’s
own acceptance
tests</a></p>

<p>For more details on verifying requests and stubbing responses, see <a href="/docs/stubbing">Stubbing</a> and <a href="/docs/verifying/">Verifying</a></p>

<p>For more information on the JUnit rule see <a href="/docs/junit-rule/">The JUnit Rule</a>.</p>

<h2 id="detailed-configuration">Detailed configuration</h2>

<p>For a bit more control over the settings of the WireMock server created
by the rule you can pass a fluently built Options object to either
(non-deprecated) rule’s constructor:</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">static</span> <span class="n">com</span><span class="o">.</span><span class="na">github</span><span class="o">.</span><span class="na">tomakehurst</span><span class="o">.</span><span class="na">wiremock</span><span class="o">.</span><span class="na">core</span><span class="o">.</span><span class="na">WireMockConfiguration</span><span class="o">.</span><span class="na">wireMockConfig</span><span class="o">;</span>
<span class="o">...</span>

<span class="nd">@Rule</span>
<span class="kd">public</span> <span class="n">WireMockRule</span> <span class="n">wireMockRule</span> <span class="o">=</span> <span class="k">new</span> <span class="n">WireMockRule</span><span class="o">(</span><span class="n">wireMockConfig</span><span class="o">().</span><span class="na">port</span><span class="o">(</span><span class="mi">8089</span><span class="o">).</span><span class="na">httpsPort</span><span class="o">(</span><span class="mi">8443</span><span class="o">));</span>
</code></pre>
</div>

<h3 id="random-port-numbers">Random port numbers</h3>

<p>You can have WireMock (or more accurately the JVM) pick random, free
HTTP and HTTPS ports (which is a great idea if you want to run your
tests concurrently):</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="nd">@Rule</span>
<span class="kd">public</span> <span class="n">WireMockRule</span> <span class="n">wireMockRule</span> <span class="o">=</span> <span class="k">new</span> <span class="n">WireMockRule</span><span class="o">(</span><span class="n">wireMockConfig</span><span class="o">().</span><span class="na">dynamicPort</span><span class="o">().</span><span class="na">dynamicHttpsPort</span><span class="o">());</span>
</code></pre>
</div>

<p>Then find out which ports to use from your tests as follows:</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kt">int</span> <span class="n">port</span> <span class="o">=</span> <span class="n">wireMockRule</span><span class="o">.</span><span class="na">port</span><span class="o">();</span>
<span class="kt">int</span> <span class="n">httpsPort</span> <span class="o">=</span> <span class="n">wireMockRule</span><span class="o">.</span><span class="na">httpsPort</span><span class="o">();</span>
</code></pre>
</div>

<h2 id="non-junit-and-general-java-usage">Non-JUnit and general Java usage</h2>

<p>If you’re not using JUnit or neither of the WireMock rules manage its
lifecycle in a suitable way you can construct and start the server
directly:</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">WireMockServer</span> <span class="n">wireMockServer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">WireMockServer</span><span class="o">(</span><span class="n">wireMockConfig</span><span class="o">().</span><span class="na">port</span><span class="o">(</span><span class="mi">8089</span><span class="o">));</span> <span class="c1">//No-args constructor will start on port 8080, no HTTPS</span>
<span class="n">wireMockServer</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>

<span class="c1">// Do some stuff</span>

<span class="n">WireMock</span><span class="o">.</span><span class="na">reset</span><span class="o">();</span>

<span class="c1">// Finish doing stuff</span>

<span class="n">wireMockServer</span><span class="o">.</span><span class="na">stop</span><span class="o">();</span>
</code></pre>
</div>

<p>If you’ve changed the port number and/or you’re running the server on
another host, you’ll need to tell the client:</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">WireMock</span><span class="o">.</span><span class="na">configureFor</span><span class="o">(</span><span class="s">"wiremock.host"</span><span class="o">,</span> <span class="mi">8089</span><span class="o">);</span>
</code></pre>
</div>

<p>And if you’ve deployed it into a servlet container under a path other
than root you’ll need to set that too:</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">WireMock</span><span class="o">.</span><span class="na">configureFor</span><span class="o">(</span><span class="s">"tomcat.host"</span><span class="o">,</span> <span class="mi">8080</span><span class="o">,</span> <span class="s">"/wiremock"</span><span class="o">);</span>
</code></pre>
</div>

<h2 id="running-standalone">Running standalone</h2>

<p>The WireMock server can be run in its own process, and configured via
the Java API, JSON over HTTP or JSON files.</p>

<p>This will start the server on port 8080:</p>

<p>You can <a href="http://repo1.maven.org/maven2/com/github/tomakehurst/wiremock-standalone/2.1.4-rc3/wiremock-standalone-2.1.4-rc3.jar">download the standalone JAR from
here</a>.</p>

<p>See <a href="/docs/running-standalone/">Running as a Standalone Process</a> running-standalone for more details and commandline options.</p>

<h2 id="fetching-all-of-your-stub-mappings-and-checking-wiremock-is-working">Fetching all of your stub mappings (and checking WireMock is working)</h2>

<p>A GET request to the root admin URL e.g <code class="highlighter-rouge">http://localhost:8080/__admin</code>
will return all currently registered stub mappings. This is a useful way
to check whether WireMock is running on the host and port you expect:</p>

<h2 id="deploying-into-a-servlet-container">Deploying into a servlet container</h2>

<p>WireMock can be packaged up as a WAR and deployed into a servlet
container, with some caveats: fault injection and browser proxying won’t
work, __files won’t be treated as a docroot as with standalone, the
server cannot be remotely shutdown, and the container must be configured
to explode the WAR on deployment. This has only really been tested in
Tomcat 6 and Jetty, so YMMV. Running standalone is definitely the
preferred option.</p>

<p>The easiest way to create a WireMock WAR project is to clone the <a href="https://github.com/tomakehurst/wiremock/tree/master/sample-war">sample
app</a></p>

<h3 id="deploying-under-a-sub-path-of-the-context-root">Deploying under a sub-path of the context root</h3>

<p>If you want WireMock’s servlet to have a non-root path, the additional
init param <code class="highlighter-rouge">mappedUnder</code> must be set with the sub-path web.xml (in
addition to configuring the servlet mapping appropriately).</p>

<p>See <a href="https://github.com/tomakehurst/wiremock/blob/master/sample-war/src/main/webappCustomMapping/WEB-INF/web.xml">the custom mapped WAR
example</a>
for details.</p>

        
      </section>

      <footer class="page__meta">
        
        




      </footer>

      
    </div>

    
  </article>

  
  
</div>


    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
    
    
    
    <li><a href="/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2016 Tom Akehurst. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

<div id="dialog" style="display: none">
  <h2 class="mocklab-popup__title">Looking for super-quick hosted mocks? Try MockLab</h2>
  <p>Instant mock services on your own public URL, zero code required. Paste, record and generate mock data. Tester-friendly UI.</p>
</div>

<script type="text/javascript">
  function setNotificationSeenCookie() {
    var expiresDate = new Date();
    expiresDate.setTime(expiresDate.getTime() + (30 * 86400000));
    document.cookie = "mocklab_notification_seen=true;expires=" + expiresDate.toGMTString() + ";path=/";
  }

  if (!document.cookie.includes('mocklab_notification_seen')) {
    window.onload = function() {
      window.setTimeout(function() {
        $("#dialog").dialog({
          dialogClass: 'mocklab-popup',
          draggable: false,
          resizable: false,
          modal: true,
          show: {
              effect: 'fade',
              duration: 1000
          },
          buttons: [{
            class: 'mocklab-popup__confirm-button',
            text: "Learn More",
            click: function() {
              window.location.href = "http://get.mocklab.io"
            }
          }]
        });

        setNotificationSeenCookie();
      }, 500);
    };
  }
</script>

      </footer>
    </div>

    <script src="/assets/js/main.min.js"></script>




  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-36386229-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>






  </body>
</html>

